"use strict";(self.webpackChunkcoinnovac_front=self.webpackChunkcoinnovac_front||[]).push([[166],{166:(y,d,r)=>{r.r(d),r.d(d,{AdminModule:()=>T});var u=r(6814),g=r(9310),p=function(n){return n.Pending="Pending",n.Completed="Completed",n}(p||{}),h=r(4282),t=r(4946),_=r(62),c=r(95);function A(n,l){if(1&n&&(t.TgZ(0,"option",13),t._uU(1),t.qZA()),2&n){const e=l.$implicit,o=t.oxw(2);t.Q6J("value",e),t.xp6(1),t.hij(" ",o.status[e]," ")}}function Z(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"number"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td")(13,"select",9),t.NdJ("ngModelChange",function(i){const a=t.CHM(e).$implicit;return t.KtG(a.status=i)})("change",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.updateLog(s))}),t.TgZ(14,"option",10),t._uU(15,"Select"),t.qZA(),t.YNc(16,A,2,2,"option",11),t.qZA()(),t.TgZ(17,"td"),t._uU(18),t.ALo(19,"date"),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.ALo(22,"date"),t.qZA(),t.TgZ(23,"td")(24,"button",12),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.deleteLog(s))}),t._uU(25,"Delete"),t.qZA()()()}if(2&n){const e=l.$implicit,o=t.oxw();t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.crypto),t.xp6(2),t.Oqu(e.currency),t.xp6(2),t.Oqu(t.xi3(9,9,e.amount_due,"1.0-0")),t.xp6(3),t.Oqu(e.crypto_adress),t.xp6(2),t.Q6J("ngModel",e.status),t.xp6(3),t.Q6J("ngForOf",o.enumKeys),t.xp6(2),t.Oqu(t.xi3(19,12,e.created,"dd.MM.yyyy HH:mm")),t.xp6(3),t.Oqu(t.xi3(22,15,e.updated,"dd.MM.yyyy HH:mm"))}}function f(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"li",6)(1,"button",12),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.setPage(s))}),t._uU(2),t.qZA()()}if(2&n){const e=l.$implicit,o=t.oxw();t.ekj("active",e===o.currentPage),t.xp6(2),t.Oqu(e)}}const C=[{path:"admin",component:(()=>{class n{constructor(e){this.logService=e,this.actionlog=[],this.no=1,this.apiUrl=h.j.API_URL,this.status=p,this.enumKeys=[],this.pageSize=5,this.currentPage=1,this.totalItems=0,this.pages=[],this.enumKeys=Object.keys(this.status)}ngOnInit(){this.logService.getActionLog().subscribe(e=>{this.actionlog=e,this.totalItems=this.actionlog.length,this.updatePages()})}updatePages(){this.pages=[];const e=Math.ceil(this.totalItems/this.pageSize);for(let o=1;o<=e;o++)this.pages.push(o)}getPagedLogs(){const e=(this.currentPage-1)*this.pageSize;return this.actionlog.slice(e,e+this.pageSize)}setPage(e){e>=1&&e<=this.pages.length&&(this.currentPage=e)}updateLog(e){this.logService.updateLog(e).subscribe(o=>{console.log("Updated",o)},o=>{console.error("Error",o)})}deleteLog(e){confirm("Are you sure you want to delete this log?")&&this.logService.deleteLog(e).subscribe(()=>{this.actionlog=this.actionlog.filter(i=>i.id!==e.id),console.log("Log deleted successfully.")},i=>{console.error("Error deleting log:",i)})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(_.q))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin"]],decls:33,vars:4,consts:[[1,"bd-example"],[1,"table","table-dark","table-striped",2,"margin-top","150px"],["scope","col"],[4,"ngFor","ngForOf"],["aria-label","Page navigation example"],[1,"pagination","justify-content-center"],[1,"page-item"],[1,"btn","btn-dark",3,"disabled","click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"form-select",2,"width","130px",3,"ngModel","ngModelChange","change"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-warning",3,"click"],[3,"value"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),t._uU(5,"ID"),t.qZA(),t.TgZ(6,"th",2),t._uU(7,"Crypto"),t.qZA(),t.TgZ(8,"th",2),t._uU(9,"Currency"),t.qZA(),t.TgZ(10,"th",2),t._uU(11,"Amount due"),t.qZA(),t.TgZ(12,"th",2),t._uU(13,"Cryptoadress"),t.qZA(),t.TgZ(14,"th",2),t._uU(15,"Status"),t.qZA(),t.TgZ(16,"th",2),t._uU(17,"Updated"),t.qZA(),t.TgZ(18,"th",2),t._uU(19,"Created"),t.qZA(),t.TgZ(20,"th",2),t._uU(21,"Actions"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,Z,26,18,"tr",3),t.qZA()(),t.TgZ(24,"nav",4)(25,"ul",5)(26,"li",6)(27,"button",7),t.NdJ("click",function(){return i.setPage(i.currentPage-1)}),t._uU(28,"Previous"),t.qZA()(),t.YNc(29,f,3,3,"li",8),t.TgZ(30,"li",6)(31,"button",7),t.NdJ("click",function(){return i.setPage(i.currentPage+1)}),t._uU(32,"Next"),t.qZA()()()()()),2&o&&(t.xp6(23),t.Q6J("ngForOf",i.getPagedLogs()),t.xp6(4),t.Q6J("disabled",1===i.currentPage),t.xp6(2),t.Q6J("ngForOf",i.pages),t.xp6(2),t.Q6J("disabled",i.currentPage===i.pages.length))},dependencies:[u.sg,c.YN,c.Kr,c.EJ,c.JJ,c.On,u.JJ,u.uU]})}return n})(),canActivate:[(n,l)=>{const e=localStorage.getItem("crypto");if(!e)return null;const i=e.split(".")[1];return JSON.parse(window.atob(i)).isAdmin}]}];let x=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(C),g.Bz]})}return n})(),T=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[u.ez,x,c.u5,c.UX]})}return n})()}}]);